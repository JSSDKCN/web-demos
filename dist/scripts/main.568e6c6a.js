"use strict";!function(a){var b={lastMousePos:{},lastPauseDiff:{x:0,y:0},dom:{base:null,panel:null,image:null},image:{width:0,height:0},origin:{width:0,height:0},init:function(a,b,c){this.dom.base=a,this.dom.panel=b,this.dom.image=c,this.initMove()},initMove:function(){var b=this,c=this.dom.base,d=this.dom.panel,e=!1,f=!1;a(c).on("click",function(a){e||(b.lastMousePos.x=a.screenX,b.lastMousePos.y=a.screenY,f=!0),e=!e}),a(c).on("mousemove",function(g){if(e){var h=b.lastMousePos.x-g.screenX,i=b.lastMousePos.y-g.screenY;console.log(f),h+=b.lastPauseDiff.x,i+=b.lastPauseDiff.x,h>0&&(h=b.lastPauseDiff.x),i>0&&(i=b.lastPauseDiff.x),b.image.width-a(c).width()+h<0&&(h=a(c).width()-b.image.width),b.image.height-a(c).height()+i<0&&(i=a(c).height()-b.image.height),a(d).css("left",h+"px"),a(d).css("top",i+"px"),b.lastPauseDiff.x=h,b.lastPauseDiff.y=i}})},setBase:function(a,b){this.setRect(this.dom.base,a,b)},setRect:function(b,c,d){a(b).css("width",c+"px"),a(b).css("height",d+"px")},setImage:function(a){var b=this,c=new Image;c.onload=function(){b.origin.width=this.width,b.origin.height=this.height,b.image.width=this.width,b.image.height=this.height,b.setRect(b.dom.panel,this.width,this.height)},c.src=a},setScale:function(b){var c=a(this.dombase).width(),d=a(this.dom.base).height();console.log(this.origin),console.log(b);var e=this.origin.width*b,f=this.origin.height*b;c>e||d>f||(this.image.width=e,this.image.height=f,console.log(this.image),this.setRect(this.dom.panel,e,f))}};b.init(".image-move-scale",".image-panel",".image-node"),b.setBase(300,200),b.setImage(a(".image-node").attr("src"));var c=1;a(".plus").click(function(){c+=.1,b.setScale(c)}),a(".minus").click(function(){c>.1&&(c-=.1),b.setScale(c)})}($);